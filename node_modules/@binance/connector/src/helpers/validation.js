'use strict'

const { isEmptyValue } = require('./utils');
const MissingParameterError = require('../error/missingParameterError');

const validateRequiredParameters = param_object => {
  if (!param_object || isEmptyValue(param_object)) {
    throw new MissingParameterError();
  }

  const param_keys = Object.keys(param_object);
  const empty_param_keys = param_keys.filter(param_key => {
    return isEmptyValue(param_object[param_key]);
  });

  if (empty_param_keys.length) {
    throw new MissingParameterError(empty_param_keys);
  }
}

const hasOneOfParameters = param_object => {
  if (!param_object || isEmptyValue(param_object)) {
    throw new MissingParameterError();
  }

  const params = Object.values(param_object);

  if (params.every(isEmptyValue)) {
    throw new MissingParameterError(Object.keys(param_object));
  }
}

module.exports = {
  validateRequiredParameters,
  hasOneOfParameters
}
